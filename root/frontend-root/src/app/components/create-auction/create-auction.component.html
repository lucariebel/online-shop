<div class="tw-m-16">
  <h1 class="!tw-mb-0">Neue Auktion</h1>
  <hr class="tw-mb-10" />
  <form [formGroup]="articleForm">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Name des Artikels</mat-label>
      <input
        matInput
        formControlName="articleName"
        [(ngModel)]="newAuction.articleName"
      />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Kategorie</mat-label>
      <input
        matInput
        formControlName="category"
        [(ngModel)]="newAuction.category"
      />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Auktionsende</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        [value]="newAuction.endDate"
        (dateChange)="newAuction.endDate = $event.value"
      />
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle
        matIconSuffix
        class="tw-mr-1"
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Uhrzeit</mat-label>
      <input
        matInput
        [ngxTimepicker]="timePicker"
        [(ngModel)]="newAuction.endTime"
        (change)="onTimeChange($event)"
      />
      <ngx-material-timepicker-toggle
        matIconSuffix
        class="tw-mr-1"
        [for]="timePicker"
      ></ngx-material-timepicker-toggle>
      <ngx-material-timepicker #timePicker></ngx-material-timepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Startpreis</mat-label>
      <input
        matInput
        type="number"
        pattern="[1-9]+"
        formControlName="price"
        [(ngModel)]="newAuction.bid"
      />
    </mat-form-field>

    <div class="img-container">
      <button mat-raised-button (click)="addImgToArticle()">
        Bilder hochladen
      </button>
      @if (newAuction.pictures.length > 0) {
        <hr />
        <div>
          @for (img of newAuction.pictures; track newAuction.pictures) {
            <img
              class="tw-h-80 tw-w-80 tw-object-cover tw-object-center tw-aspect-square"
              [src]="img"
              alt="article picture..."
            />
          }
        </div>
      }
    </div>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Beschreibung</mat-label>
      <textarea
        matInput
        formControlName="description"
        [(ngModel)]="newAuction.description"
      ></textarea>
    </mat-form-field>

    <button
      mat-raised-button
      color="primary"
      (click)="onSubmit()"
      routerLink=""
    >
      Auktion einstellen
    </button>
  </form>
</div>
